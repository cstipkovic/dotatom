(function() {
  var FindLabels, fs, fsPlus, path;

  fsPlus = require('fs-plus');

  fs = require('fs-plus');

  path = require('path');

  module.exports = FindLabels = {
    getLabelsByText: function(text, file) {
      var inputRex, labelRex, match, matches;
      if (file == null) {
        file = "";
      }
      labelRex = /\\(?:th)?label{([^}]+)}/g;
      matches = [];
      while ((match = labelRex.exec(text))) {
        matches.push({
          label: match[1]
        });
      }
      if (file == null) {
        return matches;
      }
      inputRex = /\\(input|include){([^}]+)}/g;
      while ((match = inputRex.exec(text))) {
        matches = matches.concat(this.getLabels(this.getAbsolutePath(file, match[2])));
      }
      return matches;
    },
    getLabels: function(file) {
      var text;
      if (!fsPlus.isFileSync(file)) {
        file = fsPlus.resolveExtension(file, ['tex']);
      }
      if (!fsPlus.isFileSync(file)) {
        return [];
      }
      text = fs.readFileSync(file).toString();
      return this.getLabelsByText(text, file);
    },
    getAbsolutePath: function(file, relativePath) {
      var ind;
      if ((ind = file.lastIndexOf(path.sep)) !== file.length) {
        file = file.substring(0, ind);
      }
      return path.resolve(file, relativePath);
    }
  };

}).call(this);

//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAiZmlsZSI6ICIiLAogICJzb3VyY2VSb290IjogIiIsCiAgInNvdXJjZXMiOiBbCiAgICAiL2hvbWUvY2luX2NoYWxpYy8uYXRvbS9wYWNrYWdlcy9sYXRleGVyL2xpYi9maW5kLWxhYmVscy5jb2ZmZWUiCiAgXSwKICAibmFtZXMiOiBbXSwKICAibWFwcGluZ3MiOiAiQUFBQTtBQUFBLE1BQUEsNEJBQUE7O0FBQUEsRUFBQSxNQUFBLEdBQVMsT0FBQSxDQUFRLFNBQVIsQ0FBVCxDQUFBOztBQUFBLEVBQ0EsRUFBQSxHQUFLLE9BQUEsQ0FBUSxTQUFSLENBREwsQ0FBQTs7QUFBQSxFQUVBLElBQUEsR0FBTyxPQUFBLENBQVEsTUFBUixDQUZQLENBQUE7O0FBQUEsRUFJQSxNQUFNLENBQUMsT0FBUCxHQUNBLFVBQUEsR0FDRTtBQUFBLElBQUEsZUFBQSxFQUFpQixTQUFDLElBQUQsRUFBTyxJQUFQLEdBQUE7QUFDZixVQUFBLGtDQUFBOztRQURzQixPQUFPO09BQzdCO0FBQUEsTUFBQSxRQUFBLEdBQVcsMEJBQVgsQ0FBQTtBQUFBLE1BQ0EsT0FBQSxHQUFVLEVBRFYsQ0FBQTtBQUVBLGFBQU0sQ0FBQyxLQUFBLEdBQVEsUUFBUSxDQUFDLElBQVQsQ0FBYyxJQUFkLENBQVQsQ0FBTixHQUFBO0FBQ0UsUUFBQSxPQUFPLENBQUMsSUFBUixDQUFhO0FBQUEsVUFBQyxLQUFBLEVBQU8sS0FBTSxDQUFBLENBQUEsQ0FBZDtTQUFiLENBQUEsQ0FERjtNQUFBLENBRkE7QUFJQSxNQUFBLElBQXNCLFlBQXRCO0FBQUEsZUFBTyxPQUFQLENBQUE7T0FKQTtBQUFBLE1BS0EsUUFBQSxHQUFXLDZCQUxYLENBQUE7QUFNQSxhQUFNLENBQUMsS0FBQSxHQUFRLFFBQVEsQ0FBQyxJQUFULENBQWMsSUFBZCxDQUFULENBQU4sR0FBQTtBQUNFLFFBQUEsT0FBQSxHQUFVLE9BQU8sQ0FBQyxNQUFSLENBQWUsSUFBQyxDQUFBLFNBQUQsQ0FBVyxJQUFDLENBQUEsZUFBRCxDQUFpQixJQUFqQixFQUF1QixLQUFNLENBQUEsQ0FBQSxDQUE3QixDQUFYLENBQWYsQ0FBVixDQURGO01BQUEsQ0FOQTthQVFBLFFBVGU7SUFBQSxDQUFqQjtBQUFBLElBV0EsU0FBQSxFQUFXLFNBQUMsSUFBRCxHQUFBO0FBQ1QsVUFBQSxJQUFBO0FBQUEsTUFBQSxJQUFHLENBQUEsTUFBVSxDQUFDLFVBQVAsQ0FBa0IsSUFBbEIsQ0FBUDtBQUNFLFFBQUEsSUFBQSxHQUFPLE1BQU0sQ0FBQyxnQkFBUCxDQUF3QixJQUF4QixFQUE4QixDQUFDLEtBQUQsQ0FBOUIsQ0FBUCxDQURGO09BQUE7QUFFQSxNQUFBLElBQUEsQ0FBQSxNQUF1QixDQUFDLFVBQVAsQ0FBa0IsSUFBbEIsQ0FBakI7QUFBQSxlQUFPLEVBQVAsQ0FBQTtPQUZBO0FBQUEsTUFHQSxJQUFBLEdBQU8sRUFBRSxDQUFDLFlBQUgsQ0FBZ0IsSUFBaEIsQ0FBcUIsQ0FBQyxRQUF0QixDQUFBLENBSFAsQ0FBQTthQUlBLElBQUMsQ0FBQSxlQUFELENBQWlCLElBQWpCLEVBQXVCLElBQXZCLEVBTFM7SUFBQSxDQVhYO0FBQUEsSUFrQkEsZUFBQSxFQUFpQixTQUFDLElBQUQsRUFBTyxZQUFQLEdBQUE7QUFDZixVQUFBLEdBQUE7QUFBQSxNQUFBLElBQUcsQ0FBQyxHQUFBLEdBQU0sSUFBSSxDQUFDLFdBQUwsQ0FBaUIsSUFBSSxDQUFDLEdBQXRCLENBQVAsQ0FBQSxLQUF3QyxJQUFJLENBQUMsTUFBaEQ7QUFDRSxRQUFBLElBQUEsR0FBTyxJQUFJLENBQUMsU0FBTCxDQUFlLENBQWYsRUFBaUIsR0FBakIsQ0FBUCxDQURGO09BQUE7YUFFQSxJQUFJLENBQUMsT0FBTCxDQUFhLElBQWIsRUFBbUIsWUFBbkIsRUFIZTtJQUFBLENBbEJqQjtHQU5GLENBQUE7QUFBQSIKfQ==

//# sourceURL=/home/cin_chalic/.atom/packages/latexer/lib/find-labels.coffee
