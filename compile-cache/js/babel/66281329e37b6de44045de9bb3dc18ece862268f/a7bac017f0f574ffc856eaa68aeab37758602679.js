function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _specHelpers = require('./spec-helpers');

var _specHelpers2 = _interopRequireDefault(_specHelpers);

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var _libBuilder = require('../lib/builder');

var _libBuilder2 = _interopRequireDefault(_libBuilder);

'use babel';

describe('Builder', function () {
  var builder = undefined,
      fixturesPath = undefined,
      filePath = undefined,
      logFilePath = undefined;

  beforeEach(function () {
    builder = new _libBuilder2['default']();
    fixturesPath = _specHelpers2['default'].cloneFixtures();
    filePath = _path2['default'].join(fixturesPath, 'file.tex');
    logFilePath = _path2['default'].join(fixturesPath, 'file.log');
  });

  describe('constructPath', function () {
    it('reads `latex.texPath` as configured', function () {
      spyOn(atom.config, 'get').andReturn();
      builder.constructPath();

      expect(atom.config.get).toHaveBeenCalledWith('latex.texPath');
    });

    it('uses platform default when `latex.texPath` is not configured', function () {
      var defaultTexPath = '/foo/bar';
      var expectedPath = [defaultTexPath, process.env.PATH].join(_path2['default'].delimiter);
      _specHelpers2['default'].spyOnConfig('latex.texPath', '');
      spyOn(builder, 'defaultTexPath').andReturn(defaultTexPath);

      var constructedPath = builder.constructPath();

      expect(constructedPath).toBe(expectedPath);
    });

    it('replaces surrounded $PATH with process.env.PATH', function () {
      var texPath = '/foo:$PATH:/bar';
      var expectedPath = texPath.replace('$PATH', process.env.PATH);
      _specHelpers2['default'].spyOnConfig('latex.texPath', texPath);

      var constructedPath = builder.constructPath();

      expect(constructedPath).toBe(expectedPath);
    });

    it('replaces leading $PATH with process.env.PATH', function () {
      var texPath = '$PATH:/bar';
      var expectedPath = texPath.replace('$PATH', process.env.PATH);
      _specHelpers2['default'].spyOnConfig('latex.texPath', texPath);

      var constructedPath = builder.constructPath();

      expect(constructedPath).toBe(expectedPath);
    });

    it('replaces trailing $PATH with process.env.PATH', function () {
      var texPath = '/foo:$PATH';
      var expectedPath = texPath.replace('$PATH', process.env.PATH);
      _specHelpers2['default'].spyOnConfig('latex.texPath', texPath);

      var constructedPath = builder.constructPath();

      expect(constructedPath).toBe(expectedPath);
    });

    it('prepends process.env.PATH with texPath', function () {
      var texPath = '/foo';
      var expectedPath = [texPath, process.env.PATH].join(_path2['default'].delimiter);
      _specHelpers2['default'].spyOnConfig('latex.texPath', texPath);

      var constructedPath = builder.constructPath();

      expect(constructedPath).toBe(expectedPath);
    });
  });

  describe('parseLogFile', function () {
    var logParser = undefined;

    beforeEach(function () {
      logParser = jasmine.createSpyObj('MockLogParser', ['parse']);
      spyOn(builder, 'getLogParser').andReturn(logParser);
    });

    it('resolves the associated log file path by invoking @resolveLogFilePath', function () {
      spyOn(builder, 'resolveLogFilePath').andReturn('foo.log');
      builder.parseLogFile(filePath);

      expect(builder.resolveLogFilePath).toHaveBeenCalledWith(filePath);
    });

    it('returns null if passed a file path that does not exist', function () {
      filePath = '/foo/bar/quux.tex';
      var result = builder.parseLogFile(filePath);

      expect(result).toBeNull();
      expect(logParser.parse).not.toHaveBeenCalled();
    });

    it('attempts to parse the resolved log file', function () {
      builder.parseLogFile(filePath);

      expect(builder.getLogParser).toHaveBeenCalledWith(logFilePath);
      expect(logParser.parse).toHaveBeenCalled();
    });
  });

  describe('getLatexEngineFromMagic', function () {
    it('detects program magic and outputs correct engine', function () {
      var filePath = _path2['default'].join(fixturesPath, 'magic-comments', 'latex-engine.tex');
      expect(builder.getLatexEngineFromMagic(filePath)).toEqual('pdflatex');
    });
  });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2Npbl9jaGFsaWMvLmF0b20vcGFja2FnZXMvbGF0ZXgvc3BlYy9idWlsZGVyLXNwZWMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7MkJBRW9CLGdCQUFnQjs7OztvQkFDbkIsTUFBTTs7OzswQkFDSCxnQkFBZ0I7Ozs7QUFKcEMsV0FBVyxDQUFBOztBQU1YLFFBQVEsQ0FBQyxTQUFTLEVBQUUsWUFBTTtBQUN4QixNQUFJLE9BQU8sWUFBQTtNQUFFLFlBQVksWUFBQTtNQUFFLFFBQVEsWUFBQTtNQUFFLFdBQVcsWUFBQSxDQUFBOztBQUVoRCxZQUFVLENBQUMsWUFBTTtBQUNmLFdBQU8sR0FBRyw2QkFBYSxDQUFBO0FBQ3ZCLGdCQUFZLEdBQUcseUJBQVEsYUFBYSxFQUFFLENBQUE7QUFDdEMsWUFBUSxHQUFHLGtCQUFLLElBQUksQ0FBQyxZQUFZLEVBQUUsVUFBVSxDQUFDLENBQUE7QUFDOUMsZUFBVyxHQUFHLGtCQUFLLElBQUksQ0FBQyxZQUFZLEVBQUUsVUFBVSxDQUFDLENBQUE7R0FDbEQsQ0FBQyxDQUFBOztBQUVGLFVBQVEsQ0FBQyxlQUFlLEVBQUUsWUFBTTtBQUM5QixNQUFFLENBQUMscUNBQXFDLEVBQUUsWUFBTTtBQUM5QyxXQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQyxTQUFTLEVBQUUsQ0FBQTtBQUNyQyxhQUFPLENBQUMsYUFBYSxFQUFFLENBQUE7O0FBRXZCLFlBQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLG9CQUFvQixDQUFDLGVBQWUsQ0FBQyxDQUFBO0tBQzlELENBQUMsQ0FBQTs7QUFFRixNQUFFLENBQUMsOERBQThELEVBQUUsWUFBTTtBQUN2RSxVQUFNLGNBQWMsR0FBRyxVQUFVLENBQUE7QUFDakMsVUFBTSxZQUFZLEdBQUcsQ0FBQyxjQUFjLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsa0JBQUss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VUFBVSxDQUFDLENBQUE7S0FDdEUsQ0FBQyxDQUFBO0dBQ0gsQ0FBQyxDQUFBO0NBQ0gsQ0FBQyxDQUFBIiwiZmlsZSI6Ii9ob21lL2Npbl9jaGFsaWMvLmF0b20vcGFja2FnZXMvbGF0ZXgvc3BlYy9idWlsZGVyLXNwZWMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGJhYmVsJ1xuXG5pbXBvcnQgaGVscGVycyBmcm9tICcuL3NwZWMtaGVscGVycydcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnXG5pbXBvcnQgQnVpbGRlciBmcm9tICcuLi9saWIvYnVpbGRlcidcblxuZGVzY3JpYmUoJ0J1aWxkZXInLCAoKSA9PiB7XG4gIGxldCBidWlsZGVyLCBmaXh0dXJlc1BhdGgsIGZpbGVQYXRoLCBsb2dGaWxlUGF0aFxuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGJ1aWxkZXIgPSBuZXcgQnVpbGRlcigpXG4gICAgZml4dHVyZXNQYXRoID0gaGVscGVycy5jbG9uZUZpeHR1cmVzKClcbiAgICBmaWxlUGF0aCA9IHBhdGguam9pbihmaXh0dXJlc1BhdGgsICdmaWxlLnRleCcpXG4gICAgbG9nRmlsZVBhdGggPSBwYXRoLmpvaW4oZml4dHVyZXNQYXRoLCAnZmlsZS5sb2cnKVxuICB9KVxuXG4gIGRlc2NyaWJlKCdjb25zdHJ1Y3RQYXRoJywgKCkgPT4ge1xuICAgIGl0KCdyZWFkcyBgbGF0ZXgudGV4UGF0aGAgYXMgY29uZmlndXJlZCcsICgpID0+IHtcbiAgICAgIHNweU9uKGF0b20uY29uZmlnLCAnZ2V0JykuYW5kUmV0dXJuKClcbiAgICAgIGJ1aWxkZXIuY29uc3RydWN0UGF0aCgpXG5cbiAgICAgIGV4cGVjdChhdG9tLmNvbmZpZy5nZXQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdsYXRleC50ZXhQYXRoJylcbiAgICB9KVxuXG4gICAgaXQoJ3VzZXMgcGxhdGZvcm0gZGVmYXVsdCB3aGVuIGBsYXRleC50ZXhQYXRoYCBpcyBub3QgY29uZmlndXJlZCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGRlZmF1bHRUZXhQYXRoID0gJy9mb28vYmFyJ1xuICAgICAgY29uc3QgZXhwZWN0ZWRQYXRoID0gW2RlZmF1bHRUZXhQYXRoLCBwcm9jZXNzLmVudi5QQVRIXS5qb2luKHBhdGguZGVsaW1pdGVyKVxuICAgICAgaGVscGVycy5zcHlPbkNvbmZpZygnbGF0ZXgudGV4UGF0aCcsICcnKVxuICAgICAgc3B5T24oYnVpbGRlciwgJ2RlZmF1bHRUZXhQYXRoJykuYW5kUmV0dXJuKGRlZmF1bHRUZXhQYXRoKVxuXG4gICAgICBjb25zdCBjb25zdHJ1Y3RlZFBhdGggPSBidWlsZGVyLmNvbnN0cnVjdFBhdGgoKVxuXG4gICAgICBleHBlY3QoY29uc3RydWN0ZWRQYXRoKS50b0JlKGV4cGVjdGVkUGF0aClcbiAgICB9KVxuXG4gICAgaXQoJ3JlcGxhY2VzIHN1cnJvdW5kZWQgJFBBVEggd2l0aCBwcm9jZXNzLmVudi5QQVRIJywgKCkgPT4ge1xuICAgICAgY29uc3QgdGV4UGF0aCA9ICcvZm9vOiRQQVRIOi9iYXInXG4gICAgICBjb25zdCBleHBlY3RlZFBhdGggPSB0ZXhQYXRoLnJlcGxhY2UoJyRQQVRIJywgcHJvY2Vzcy5lbnYuUEFUSClcbiAgICAgIGhlbHBlcnMuc3B5T25Db25maWcoJ2xhdGV4LnRleFBhdGgnLCB0ZXhQYXRoKVxuXG4gICAgICBjb25zdCBjb25zdHJ1Y3RlZFBhdGggPSBidWlsZGVyLmNvbnN0cnVjdFBhdGgoKVxuXG4gICAgICBleHBlY3QoY29uc3RydWN0ZWRQYXRoKS50b0JlKGV4cGVjdGVkUGF0aClcbiAgICB9KVxuXG4gICAgaXQoJ3JlcGxhY2VzIGxlYWRpbmcgJFBBVEggd2l0aCBwcm9jZXNzLmVudi5QQVRIJywgKCkgPT4ge1xuICAgICAgY29uc3QgdGV4UGF0aCA9ICckUEFUSDovYmFyJ1xuICAgICAgY29uc3QgZXhwZWN0ZWRQYXRoID0gdGV4UGF0aC5yZXBsYWNlKCckUEFUSCcsIHByb2Nlc3MuZW52LlBBVEgpXG4gICAgICBoZWxwZXJzLnNweU9uQ29uZmlnKCdsYXRleC50ZXhQYXRoJywgdGV4UGF0aClcblxuICAgICAgY29uc3QgY29uc3RydWN0ZWRQYXRoID0gYnVpbGRlci5jb25zdHJ1Y3RQYXRoKClcblxuICAgICAgZXhwZWN0KGNvbnN0cnVjdGVkUGF0aCkudG9CZShleHBlY3RlZFBhdGgpXG4gICAgfSlcblxuICAgIGl0KCdyZXBsYWNlcyB0cmFpbGluZyAkUEFUSCB3aXRoIHByb2Nlc3MuZW52LlBBVEgnLCAoKSA9PiB7XG4gICAgICBjb25zdCB0ZXhQYXRoID0gJy9mb286JFBBVEgnXG4gICAgICBjb25zdCBleHBlY3RlZFBhdGggPSB0ZXhQYXRoLnJlcGxhY2UoJyRQQVRIJywgcHJvY2Vzcy5lbnYuUEFUSClcbiAgICAgIGhlbHBlcnMuc3B5T25Db25maWcoJ2xhdGV4LnRleFBhdGgnLCB0ZXhQYXRoKVxuXG4gICAgICBjb25zdCBjb25zdHJ1Y3RlZFBhdGggPSBidWlsZGVyLmNvbnN0cnVjdFBhdGgoKVxuXG4gICAgICBleHBlY3QoY29uc3RydWN0ZWRQYXRoKS50b0JlKGV4cGVjdGVkUGF0aClcbiAgICB9KVxuXG4gICAgaXQoJ3ByZXBlbmRzIHByb2Nlc3MuZW52LlBBVEggd2l0aCB0ZXhQYXRoJywgKCkgPT4ge1xuICAgICAgY29uc3QgdGV4UGF0aCA9ICcvZm9vJ1xuICAgICAgY29uc3QgZXhwZWN0ZWRQYXRoID0gW3RleFBhdGgsIHByb2Nlc3MuZW52LlBBVEhdLmpvaW4ocGF0aC5kZWxpbWl0ZXIpXG4gICAgICBoZWxwZXJzLnNweU9uQ29uZmlnKCdsYXRleC50ZXhQYXRoJywgdGV4UGF0aClcblxuICAgICAgY29uc3QgY29uc3RydWN0ZWRQYXRoID0gYnVpbGRlci5jb25zdHJ1Y3RQYXRoKClcblxuICAgICAgZXhwZWN0KGNvbnN0cnVjdGVkUGF0aCkudG9CZShleHBlY3RlZFBhdGgpXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgncGFyc2VMb2dGaWxlJywgKCkgPT4ge1xuICAgIGxldCBsb2dQYXJzZXJcblxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgbG9nUGFyc2VyID0gamFzbWluZS5jcmVhdGVTcHlPYmooJ01vY2tMb2dQYXJzZXInLCBbJ3BhcnNlJ10pXG4gICAgICBzcHlPbihidWlsZGVyLCAnZ2V0TG9nUGFyc2VyJykuYW5kUmV0dXJuKGxvZ1BhcnNlcilcbiAgICB9KVxuXG4gICAgaXQoJ3Jlc29sdmVzIHRoZSBhc3NvY2lhdGVkIGxvZyBmaWxlIHBhdGggYnkgaW52b2tpbmcgQHJlc29sdmVMb2dGaWxlUGF0aCcsICgpID0+IHtcbiAgICAgIHNweU9uKGJ1aWxkZXIsICdyZXNvbHZlTG9nRmlsZVBhdGgnKS5hbmRSZXR1cm4oJ2Zvby5sb2cnKVxuICAgICAgYnVpbGRlci5wYXJzZUxvZ0ZpbGUoZmlsZVBhdGgpXG5cbiAgICAgIGV4cGVjdChidWlsZGVyLnJlc29sdmVMb2dGaWxlUGF0aCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoZmlsZVBhdGgpXG4gICAgfSlcblxuICAgIGl0KCdyZXR1cm5zIG51bGwgaWYgcGFzc2VkIGEgZmlsZSBwYXRoIHRoYXQgZG9lcyBub3QgZXhpc3QnLCAoKSA9PiB7XG4gICAgICBmaWxlUGF0aCA9ICcvZm9vL2Jhci9xdXV4LnRleCdcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGJ1aWxkZXIucGFyc2VMb2dGaWxlKGZpbGVQYXRoKVxuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlTnVsbCgpXG4gICAgICBleHBlY3QobG9nUGFyc2VyLnBhcnNlKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpXG4gICAgfSlcblxuICAgIGl0KCdhdHRlbXB0cyB0byBwYXJzZSB0aGUgcmVzb2x2ZWQgbG9nIGZpbGUnLCAoKSA9PiB7XG4gICAgICBidWlsZGVyLnBhcnNlTG9nRmlsZShmaWxlUGF0aClcblxuICAgICAgZXhwZWN0KGJ1aWxkZXIuZ2V0TG9nUGFyc2VyKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChsb2dGaWxlUGF0aClcbiAgICAgIGV4cGVjdChsb2dQYXJzZXIucGFyc2UpLnRvSGF2ZUJlZW5DYWxsZWQoKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ2dldExhdGV4RW5naW5lRnJvbU1hZ2ljJywgKCkgPT4ge1xuICAgIGl0KCdkZXRlY3RzIHByb2dyYW0gbWFnaWMgYW5kIG91dHB1dHMgY29ycmVjdCBlbmdpbmUnLCAoKSA9PiB7XG4gICAgICBjb25zdCBmaWxlUGF0aCA9IHBhdGguam9pbihmaXh0dXJlc1BhdGgsICdtYWdpYy1jb21tZW50cycsICdsYXRleC1lbmdpbmUudGV4JylcbiAgICAgIGV4cGVjdChidWlsZGVyLmdldExhdGV4RW5naW5lRnJvbU1hZ2ljKGZpbGVQYXRoKSkudG9FcXVhbCgncGRmbGF0ZXgnKVxuICAgIH0pXG4gIH0pXG59KVxuIl19
//# sourceURL=/home/cin_chalic/.atom/packages/latex/spec/builder-spec.js
